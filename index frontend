<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlanWise</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <style>
        body {
            background: url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1600&q=80') no-repeat center center fixed;
            background-size: cover;
            font-family: "Segoe UI", sans-serif;
            color: #fff;
        }

        section {
            padding: 90px 0;
            background: rgba(0, 0, 0, 0.55);
        }

        .navbar {
            background: rgba(0, 0, 0, 0.6) !important;
            backdrop-filter: blur(5px);
        }

        .navbar-brand,
        .nav-link {
            color: #f8f9fa !important;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #f39c12 !important;
        }

        .navbar .btn {
            border-color: #f39c12;
            color: #f39c12 !important;
            transition: 0.3s;
        }

        .navbar .btn:hover {
            background: #f39c12;
            color: #fff !important;
        }

        h1,
        h2 {
            color: #f39c12;
        }

        p {
            color: #eee;
        }

        .feature-box {
            border: none;
            border-radius: 20px;
            height: 200px;
            margin: 15px;
            padding: 20px;
            background:#c4aa36;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
            overflow: hidden;
        }

        .feature-box:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .feature-desc {
            position: absolute;
            bottom: -100%;
            left: 0;
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            font-size: 14px;
            line-height: 1.4;
            transition: bottom 0.4s ease-in-out;
        }

        .feature-box:hover .feature-desc {
            bottom: 0;
        }

        .modal-content {
            background: #001f3f;
            color: #fff;
            border-radius: 15px;
            padding: 15px;
        }

        .modal .btn-primary {
            background: #f39c12;
            border: none;
        }

        footer {
            background: rgba(0, 0, 0, 0.85);
            padding: 20px;
            text-align: center;
            color: #bbb;
        }

        #devLocalStorageTable {
            display: none;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 15px;
            border-radius: 12px;
            margin: 20px;
        }

        #devLocalStorageTable table {
            width: 100%;
            border-collapse: collapse;
        }

        #devLocalStorageTable th,
        #devLocalStorageTable td {
            padding: 10px;
            border: 1px solid #fff;
            text-align: center;
        }

        #devLocalStorageTable th {
            background-color: rgba(243, 156, 18, 0.8);
        }
    </style>
</head>

<body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand animate__animated animate__fadeInLeft" href="#home">PlanWise</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Follow Us</a></li>
                    <li class="nav-item"><a class="nav-link btn ms-2" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login / Sign Up</a></li>
                    <li class="nav-item"><a class="nav-link btn ms-2" href="#" onclick="logoutUser()">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Home -->
    <section id="home" class="text-center">
        <div class="container">
            <h1>Welcome to PlanWise</h1>
            <p class="lead">Smarter Grocery Planning. Less Waste, More Wellness.</p>
            <button id="getStartedBtn" class="btn btn-warning mt-3">Get Started</button>
        </div>
    </section>

    <!-- About -->
    <section id="about">
        <div class="container text-center">
            <h2>Why PlanWise?</h2>
            <p>PlanWise tackles food wastage and inefficient grocery management by intelligently tracking purchases, expiry dates, and consumption patterns. It predicts optimal quantities, sends timely alerts, and suggests sustainable shopping habits to make your kitchen smarter and your life easier.</p>
        </div>
    </section>

    <!-- Features -->
    <section id="features">
        <div class="container">
            <h2 class="text-center">Features</h2>
            <div class="row g-4 mt-4">
                <div class="col-md-6 col-lg-4">
                    <div class="card feature-box">
                        <i class="bi bi-basket2 fs-1 text-success mb-3"></i>
                        Grocery Item Tracking
                        <div class="feature-desc">Track your groceries with ease so you always know whatâ€™s in stock.</div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card feature-box">
                        <i class="bi bi-calendar-check fs-1 text-primary mb-3"></i>
                        Purchase & Expiry Date Monitoring
                        <div class="feature-desc">Automatically monitor expiry dates to reduce waste and eat safely.</div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card feature-box">
                        <i class="bi bi-graph-up fs-1 text-warning mb-3"></i>
                        Smart Quantity Suggestions
                        <div class="feature-desc">AI-powered suggestions ensure you purchase just the right amount.</div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card feature-box">
                        <i class="fas fa-chart-line fa-2x text-success mb-3"></i>
                        Consumption Pattern Learning
                        <div class="feature-desc">PlanWise learns your habits and adapts recommendations over time.</div>
                    </div>
                </div>
        </div>
    </section>

    <!-- Contact -->
    <footer>
        <section id="contact" class="text-center">
            <div class="container">
                <h2>Follow Us</h2>
                <p>ðŸ“§ ignatiusantojennifer@gmail.com<br>ðŸ“ž +91-9704594010</p>
            </div>
        </section>
    </footer>

    <!-- Developer LocalStorage Table -->
    <div id="devLocalStorageTable">
        <h3>LocalStorage Data (Developer Demo)</h3>
        <table>
            <thead>
                <tr>
                    <th>Email</th>
                    <th>Password</th>
                    <th>Items</th>
                    <th>Login Time</th>
                    <th>Logout Time</th>
                </tr>
            </thead>
            <tbody id="devTableBody"></tbody>
        </table>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title w-100 text-center">Login</h2>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <input type="email" class="form-control mb-3" id="loginEmail" placeholder="Email" required>
                        <input type="password" class="form-control mb-3" id="loginPassword" placeholder="Password" required>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                        <p class="text-center mt-3">Don't have an account? <a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#signupModal">Sign up</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title w-100 text-center">Sign Up</h2>
                </div>
                <div class="modal-body">
                    <form id="signupForm">
                        <input type="text" class="form-control mb-3" placeholder="Full Name" required>
                        <input type="email" class="form-control mb-3" id="signupEmail" placeholder="Email" required>
                        <input type="tel" class="form-control mb-3" placeholder="Phone" required>
                        <select class="form-control mb-3" required>
                            <option disabled selected>Select Gender</option>
                            <option>Male</option>
                            <option>Female</option>
                            <option>Other</option>
                        </select>
                        <input type="date" class="form-control mb-3" required>
                        <input type="text" class="form-control mb-3" placeholder="Username" required>
                        <input type="password" class="form-control mb-3" id="signupPassword" placeholder="Password" required>
                        <input type="password" class="form-control mb-3" placeholder="Confirm Password" required>
                        <button type="submit" class="btn btn-primary w-100">Sign Up</button>
                        <p class="text-center mt-3">Already have an account? <a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#loginModal">Login</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Choice Modal -->
    <div class="modal fade" id="categoryModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title w-100 text-center">Choose Category</h2>
                </div>
                <div class="modal-body">
                    <form id="categoryForm">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="category" value="home">
                            <label class="form-check-label">Home Materials</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="category" value="food">
                            <label class="form-check-label">Foods</label>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3 w-100">Continue</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // DOM Helpers
        const $ = id => document.getElementById(id);
        const getStartedBtn = $("getStartedBtn");
        const loginForm = $("loginForm");
        const signupForm = $("signupForm");
        const categoryForm = $("categoryForm");

        // -------------------------
        // DEV TABLE
        function renderDevTable() {
            const tbody = $("devTableBody");
            tbody.innerHTML = "";
            const email = localStorage.getItem("userEmail") || "N/A";
            const pass = localStorage.getItem("userPassword") || "N/A";
            const items = JSON.parse(localStorage.getItem("items") || "[]").length;
            const loginTime = localStorage.getItem("loginTime") || "N/A";
            const logoutTime = localStorage.getItem("logoutTime") || "N/A";
            const tr = document.createElement("tr");
            tr.innerHTML = `<td>${email}</td><td>${pass}</td><td>${items}</td><td>${loginTime}</td><td>${logoutTime}</td>`;
            tbody.appendChild(tr);
        }
        document.addEventListener("keydown", e => {
            if (e.key.toLowerCase() === "d") {
                const table = $("devLocalStorageTable");
                table.style.display = table.style.display === "none" ? "block" : "none";
                renderDevTable();
            }
        });

        // -------------------------
        // SIGNUP
        signupForm.addEventListener("submit", (e) => {
  e.preventDefault();
  const email = document.getElementById("signupEmail").value;
  const password = document.getElementById("signupPassword").value;

  // Save user in localStorage
  localStorage.setItem("userEmail", email);
  localStorage.setItem("userPassword", password);
  localStorage.setItem("isLoggedIn", "true");
  localStorage.setItem("loginTime", new Date().toLocaleString()); // store login time

  alert("Signed up successfully!");
  const modal = bootstrap.Modal.getInstance(document.getElementById("signupModal"));
  modal.hide();

  updateNavButtons(); // optional: update login/logout buttons immediately
});


        // -------------------------
        // LOGIN
        loginForm.addEventListener("submit", (e) => {
  e.preventDefault();
  const email = document.getElementById("loginEmail").value;
  const password = document.getElementById("loginPassword").value;

  if (email === localStorage.getItem("userEmail") && password === localStorage.getItem("userPassword")) {
    localStorage.setItem("isLoggedIn", "true");
    localStorage.setItem("loginTime", new Date().toLocaleString()); // store login time
    alert("Login successful!");
    const modal = bootstrap.Modal.getInstance(document.getElementById("loginModal"));
    modal.hide();

    updateNavButtons(); // show logout button
  } else {
    alert("Invalid credentials!");
  }
});


        // -------------------------
        // LOGOUT
       function updateNavButtons() {
  const navButtons = document.getElementById("navButtons");
  if (localStorage.getItem("isLoggedIn") === "true") {
    document.getElementById("loginBtn").outerHTML = `
      <a class="nav-link btn ms-2" href="#" id="logoutBtn">Logout</a>
    `;

    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("isLoggedIn");
      localStorage.removeItem("loginTime");
      alert("Logged out successfully!");
      location.reload(); // refresh to show login/signup again
    });
  }
}

        // -------------------------
        // LOGIN CHECK
        function checkLoginAndRedirect(target) {
            const loggedIn = localStorage.getItem("isLoggedIn") === "true";
            if (loggedIn) {
                if (target === "getStarted") new bootstrap.Modal($("categoryModal")).show();
                else window.location.href = `${target}.html`;
            } else new bootstrap.Modal($("loginModal")).show();
        }

        // -------------------------
        // BUTTON ACTIONS
        getStartedBtn.addEventListener("click", () => checkLoginAndRedirect("getStarted"));
        document.querySelectorAll(".feature-box").forEach(box => {
            box.addEventListener("click", () => {
                const featureText = box.innerText.trim();
                if (featureText.includes("Grocery")) checkLoginAndRedirect("grocery");
                else if (featureText.includes("Expiry")) checkLoginAndRedirect("expiry");
                else if (featureText.includes("Quantity")) checkLoginAndRedirect("quantity");
                else if (featureText.includes("Consumption")) checkLoginAndRedirect("dashboard");
            });
        });

        // -------------------------
        // GROCERY ITEM TRACKING
        let items = JSON.parse(localStorage.getItem("items") || "[]");

        function renderItems() {
            localStorage.setItem("items", JSON.stringify(items));
        }

        function addItem(name, category, qty, purchaseDate, expiryDate) {
            items.push({
                name,
                category,
                qty,
                purchaseDate,
                expiryDate
            });
            renderItems();
        }

        function deleteItem(index) {
            items.splice(index, 1);
            renderItems();
        }

        // -------------------------
        // CATEGORY FORM
        categoryForm.addEventListener("submit", e => {
            e.preventDefault();
            const category = categoryForm.category.value;
            const itemName = prompt("Enter item name:");
            const qty = prompt("Enter quantity:");
            const today = new Date().toISOString().split("T")[0];
            const expiry = new Date();
            expiry.setDate(expiry.getDate() + (category === "food" ? 5 : 30));
            const expiryDate = expiry.toISOString().split("T")[0];
            addItem(itemName || "Item", category, qty || 1, today, expiryDate);
            bootstrap.Modal.getInstance($("categoryModal")).hide();
            alert(`Added ${itemName} to ${category} category!`);
        });

         updateNavButtons(); // ensures correct button shows on page load
    </script>
</body>

</html>
